from pathlib import Path
from voicevox_core import VoicevoxCore
import simpleaudio as sa
import io

# コアファイルの設定
core = VoicevoxCore(open_jtalk_dict_dir=Path("open_jtalk_dic_utf_8-1.11"))

# ずんだもんの声ID
speaker_id = 3
# モデルデータの読み込み
if not core.is_model_loaded(speaker_id):
    core.load_model(speaker_id)

# 読み上げデータ
speech_script = "ボイスボックスコアを使って、読み上げのテストなのだ。"
# 音声バイナリーデータ作成
wave_bytes = core.tts(speech_script, speaker_id)

# バイナリーデータをバイトストリームとして読み込む
audio_stream = io.BytesIO(wave_bytes)
# バイトストリームを再生可能なオブジェクトに変換
wave_obj = sa.WaveObject.from_wave_file(audio_stream)

# 再生
play_obj = wave_obj.play()
play_obj.wait_done()  # 再生が完了するまで待機

# from pprint import pprint
# pprint(METAS)
"""
[Meta(name='四国めたん',
    styles=[Style(name='ノーマル', id=2),
            Style(name='あまあま', id=0),
            Style(name='ツンツン', id=6),
            Style(name='セクシー', id=4),
            Style(name='ささやき', id=36),
            Style(name='ヒソヒソ', id=37),
            Style(name='ノーマル', id=3002),
            Style(name='あまあま', id=3000),
            Style(name='ツンツン', id=3006),
            Style(name='セクシー', id=3004),
            Style(name='ヒソヒソ', id=3037)],
    speaker_uuid='7ffcb7ce-00ec-4bdc-82cd-45a8889e43ff',
    version='0.15.4'),
Meta(name='ずんだもん',
    styles=[Style(name='ノーマル', id=3),
            Style(name='あまあま', id=1),
            Style(name='ツンツン', id=7),
            Style(name='セクシー', id=5),
            Style(name='ささやき', id=22),
            Style(name='ヒソヒソ', id=38),
            Style(name='ヘロヘロ', id=75),
            Style(name='なみだめ', id=76),
            Style(name='ノーマル', id=3003),
            Style(name='あまあま', id=3001),
            Style(name='ツンツン', id=3007),
            Style(name='セクシー', id=3005),
            Style(name='ヒソヒソ', id=3038),
            Style(name='ヘロヘロ', id=3075),
            Style(name='なみだめ', id=3076)],
    speaker_uuid='388f246b-8c41-4ac1-8e2d-5d79f3ff56d9',
    version='0.15.4'),
Meta(name='春日部つむぎ',
    styles=[Style(name='ノーマル', id=8), Style(name='ノーマル', id=3008)],
    speaker_uuid='35b2c544-660e-401e-b503-0e14c635303a',
    version='0.15.4'),
Meta(name='雨晴はう',
    styles=[Style(name='ノーマル', id=10), Style(name='ノーマル', id=3010)],
    speaker_uuid='3474ee95-c274-47f9-aa1a-8322163d96f1',
    version='0.15.4'),
Meta(name='波音リツ',
    styles=[Style(name='ノーマル', id=9),
            Style(name='クイーン', id=65),
            Style(name='ノーマル', id=3009),
            Style(name='クイーン', id=3065),
            Style(name='ノーマル', id=6000)],
    speaker_uuid='b1a81618-b27b-40d2-b0ea-27a9ad408c4b',
    version='0.15.4'),
Meta(name='玄野武宏',
    styles=[Style(name='ノーマル', id=11),
            Style(name='喜び', id=39),
            Style(name='ツンギレ', id=40),
            Style(name='悲しみ', id=41),
            Style(name='ノーマル', id=3011),
            Style(name='喜び', id=3039),
            Style(name='ツンギレ', id=3040),
            Style(name='悲しみ', id=3041)],
    speaker_uuid='c30dc15a-0992-4f8d-8bb8-ad3b314e6a6f',
    version='0.15.4'),
Meta(name='白上虎太郎',
    styles=[Style(name='ふつう', id=12),
            Style(name='わーい', id=32),
            Style(name='びくびく', id=33),
            Style(name='おこ', id=34),
            Style(name='びえーん', id=35),
            Style(name='ふつう', id=3012),
            Style(name='わーい', id=3032),
            Style(name='びくびく', id=3033),
            Style(name='おこ', id=3034),
            Style(name='びえーん', id=3035)],
    speaker_uuid='e5020595-5c5d-4e87-b849-270a518d0dcf',
    version='0.15.4'),
Meta(name='青山龍星',
    styles=[Style(name='ノーマル', id=13),
            Style(name='熱血', id=81),
            Style(name='不機嫌', id=82),
            Style(name='喜び', id=83),
            Style(name='しっとり', id=84),
            Style(name='かなしみ', id=85),
            Style(name='囁き', id=86),
            Style(name='ノーマル', id=3013),
            Style(name='熱血', id=3081),
            Style(name='不機嫌', id=3082),
            Style(name='喜び', id=3083),
            Style(name='しっとり', id=3084),
            Style(name='かなしみ', id=3085)],
    speaker_uuid='4f51116a-d9ee-4516-925d-21f183e2afad',
    version='0.15.4'),
Meta(name='冥鳴ひまり',
    styles=[Style(name='ノーマル', id=14), Style(name='ノーマル', id=3014)],
    speaker_uuid='8eaad775-3119-417e-8cf4-2a10bfd592c8',
    version='0.15.4'),
Meta(name='九州そら',
    styles=[Style(name='ノーマル', id=16),
            Style(name='あまあま', id=15),
            Style(name='ツンツン', id=18),
            Style(name='セクシー', id=17),
            Style(name='ささやき', id=19),
            Style(name='ノーマル', id=3016),
            Style(name='あまあま', id=3015),
            Style(name='ツンツン', id=3018),
            Style(name='セクシー', id=3017)],
    speaker_uuid='481fb609-6446-4870-9f46-90c4dd623403',
    version='0.15.4'),
Meta(name='もち子さん',
    styles=[Style(name='ノーマル', id=20),
            Style(name='セクシー／あん子', id=66),
            Style(name='泣き', id=77),
            Style(name='怒り', id=78),
            Style(name='喜び', id=79),
            Style(name='のんびり', id=80),
            Style(name='ノーマル', id=3020),
            Style(name='セクシー／あん子', id=3066),
            Style(name='泣き', id=3077),
            Style(name='怒り', id=3078),
            Style(name='喜び', id=3079),
            Style(name='のんびり', id=3080)],
    speaker_uuid='9f3ee141-26ad-437e-97bd-d22298d02ad2',
    version='0.15.4'),
Meta(name='剣崎雌雄',
    styles=[Style(name='ノーマル', id=21), Style(name='ノーマル', id=3021)],
    speaker_uuid='1a17ca16-7ee5-4ea5-b191-2f02ace24d21',
    version='0.15.4'),
Meta(name='WhiteCUL',
    styles=[Style(name='ノーマル', id=23),
            Style(name='たのしい', id=24),
            Style(name='かなしい', id=25),
            Style(name='びえーん', id=26),
            Style(name='ノーマル', id=3023),
            Style(name='たのしい', id=3024),
            Style(name='かなしい', id=3025),
            Style(name='びえーん', id=3026)],
    speaker_uuid='67d5d8da-acd7-4207-bb10-b5542d3a663b',
    version='0.15.4'),
Meta(name='後鬼',
    styles=[Style(name='人間ver.', id=27),
            Style(name='ぬいぐるみver.', id=28),
            Style(name='人間（怒り）ver.', id=87),
            Style(name='鬼ver.', id=88),
            Style(name='人間ver.', id=3027),
            Style(name='ぬいぐるみver.', id=3028)],
    speaker_uuid='0f56c2f2-644c-49c9-8989-94e11f7129d0',
    version='0.15.4'),
Meta(name='No.7',
    styles=[Style(name='ノーマル', id=29),
            Style(name='アナウンス', id=30),
            Style(name='読み聞かせ', id=31),
            Style(name='ノーマル', id=3029),
            Style(name='アナウンス', id=3030),
            Style(name='読み聞かせ', id=3031)],
    speaker_uuid='044830d2-f23b-44d6-ac0d-b5d733caa900',
    version='0.15.4'),
Meta(name='ちび式じい',
    styles=[Style(name='ノーマル', id=42), Style(name='ノーマル', id=3042)],
    speaker_uuid='468b8e94-9da4-4f7a-8715-a22a48844f9e',
    version='0.15.4'),
Meta(name='櫻歌ミコ',
    styles=[Style(name='ノーマル', id=43),
            Style(name='第二形態', id=44),
            Style(name='ロリ', id=45),
            Style(name='ノーマル', id=3043),
            Style(name='第二形態', id=3044),
            Style(name='ロリ', id=3045)],
    speaker_uuid='0693554c-338e-4790-8982-b9c6d476dc69',
    version='0.15.4'),
Meta(name='小夜/SAYO',
    styles=[Style(name='ノーマル', id=46), Style(name='ノーマル', id=3046)],
    speaker_uuid='a8cc6d22-aad0-4ab8-bf1e-2f843924164a',
    version='0.15.4'),
Meta(name='ナースロボ＿タイプＴ',
    styles=[Style(name='ノーマル', id=47),
            Style(name='楽々', id=48),
            Style(name='恐怖', id=49),
            Style(name='内緒話', id=50),
            Style(name='ノーマル', id=3047),
            Style(name='楽々', id=3048),
            Style(name='恐怖', id=3049)],
    speaker_uuid='882a636f-3bac-431a-966d-c5e6bba9f949',
    version='0.15.4'),
Meta(name='†聖騎士 紅桜†',
    styles=[Style(name='ノーマル', id=51), Style(name='ノーマル', id=3051)],
    speaker_uuid='471e39d2-fb11-4c8c-8d89-4b322d2498e0',
    version='0.15.4'),
Meta(name='雀松朱司',
    styles=[Style(name='ノーマル', id=52), Style(name='ノーマル', id=3052)],
    speaker_uuid='0acebdee-a4a5-4e12-a695-e19609728e30',
    version='0.15.4'),
Meta(name='麒ヶ島宗麟',
    styles=[Style(name='ノーマル', id=53), Style(name='ノーマル', id=3053)],
    speaker_uuid='7d1e7ba7-f957-40e5-a3fc-da49f769ab65',
    version='0.15.4'),
Meta(name='春歌ナナ',
    styles=[Style(name='ノーマル', id=54), Style(name='ノーマル', id=3054)],
    speaker_uuid='ba5d2428-f7e0-4c20-ac41-9dd56e9178b4',
    version='0.15.4'),
Meta(name='猫使アル',
    styles=[Style(name='ノーマル', id=55),
            Style(name='おちつき', id=56),
            Style(name='うきうき', id=57),
            Style(name='ノーマル', id=3055),
            Style(name='おちつき', id=3056),
            Style(name='うきうき', id=3057)],
    speaker_uuid='00a5c10c-d3bd-459f-83fd-43180b521a44',
    version='0.15.4'),
Meta(name='猫使ビィ',
    styles=[Style(name='ノーマル', id=58),
            Style(name='おちつき', id=59),
            Style(name='人見知り', id=60),
            Style(name='ノーマル', id=3058),
            Style(name='おちつき', id=3059)],
    speaker_uuid='c20a2254-0349-4470-9fc8-e5c0f8cf3404',
    version='0.15.4'),
Meta(name='中国うさぎ',
    styles=[Style(name='ノーマル', id=61),
            Style(name='おどろき', id=62),
            Style(name='こわがり', id=63),
            Style(name='へろへろ', id=64),
            Style(name='ノーマル', id=3061),
            Style(name='おどろき', id=3062),
            Style(name='こわがり', id=3063),
            Style(name='へろへろ', id=3064)],
    speaker_uuid='1f18ffc3-47ea-4ce0-9829-0576d03a7ec8',
    version='0.15.4'),
Meta(name='栗田まろん',
    styles=[Style(name='ノーマル', id=67), Style(name='ノーマル', id=3067)],
    speaker_uuid='04dbd989-32d0-40b4-9e71-17c920f2a8a9',
    version='0.15.4'),
Meta(name='あいえるたん',
    styles=[Style(name='ノーマル', id=68), Style(name='ノーマル', id=3068)],
    speaker_uuid='dda44ade-5f9c-4a3a-9d2c-2a976c7476d9',
    version='0.15.4'),
Meta(name='満別花丸',
    styles=[Style(name='ノーマル', id=69),
            Style(name='元気', id=70),
            Style(name='ささやき', id=71),
            Style(name='ぶりっ子', id=72),
            Style(name='ボーイ', id=73),
            Style(name='ノーマル', id=3069),
            Style(name='元気', id=3070),
            Style(name='ささやき', id=3071),
            Style(name='ぶりっ子', id=3072),
            Style(name='ボーイ', id=3073)],
    speaker_uuid='287aa49f-e56b-4530-a469-855776c84a8d',
    version='0.15.4'),
Meta(name='琴詠ニア',
    styles=[Style(name='ノーマル', id=74), Style(name='ノーマル', id=3074)],
    speaker_uuid='97a4af4b-086e-4efd-b125-7ae2da85e697',
    version='0.15.4')]
"""
